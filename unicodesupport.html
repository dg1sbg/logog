<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>logog: Unicode support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">logog
   </div>
   <div id="projectbrief">logger optimized for games</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('unicodesupport.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Unicode support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The logog library may be compiled either in ANSI mode or in Unicode mode. By default, logog is compiled as an ANSI library. In this case, multibyte characters are not permitted in log messages. To enable Unicode support, define the LOGOG_UNICODE flag in <a class="el" href="logog_8hpp.html">logog.hpp</a> before compiling the logog library.</p>
<p>Defining this flag sets wchar_t as the base type for all logog character operations. On Windows like platforms, a wchar_t is two bytes, and on Posix-like platforms this may be two bytes or four bytes.</p>
<p>Because Unicode support is based around wchar_t, the exact format of the Unicode output depends on the endianness of the target platform as well as the size of wchar_t. If logog is creating a new output log file, logog tries to add a Unicode BOM to the start of the file, if wchar_t is either two or four bytes in length. In this case, logog can write a UTF-16 or UTF-32 BOM, in either little or big endian format. See <a class="el" href="classlogog_1_1_log_file.html#ada13e2d194bb08f048da161c435d3f46">LogFile::WriteUnicodeBOM()</a> for more information on how this BOM is written. More information on what a BOM does is available at <a href="http://unicode.org/faq/utf_bom.html">http://unicode.org/faq/utf_bom.html</a> .</p>
<p>Defining LOGOG_UNICODE has several effects on logog. First, this forces all logging functions to expect to receive string parameters as arrays of the local wchar_t type instead of char types. In other words, the LOGOG_CHAR base type is redefined to wchar_t instead of char. Second, this forces logog to route all <a class="el" href="classlogog_1_1_cout.html">Cout</a> messages to wcout, and all <a class="el" href="classlogog_1_1_cerr.html">Cerr</a> messages to wcerr.</p>
<p>A convenience macro, <a class="el" href="string_8hpp.html#a3fb0a6b6623ebd4d9f20344af56c8471">_LG()</a>, is available (if you haven't defined LOGOG_USE_PREFIX) for easily switching your constant strings from ANSI to Unicode, based on the compilation value of LOGOG_UNICODE. To use this macro, and hence to have all your code compile in both ANSI and Unicode modes, log in the following fashion:</p>
<div class="fragment"><div class="line"><a class="code" href="macro_8hpp.html#aedf01192151e10a6620567952711ff69">INFO</a>(<a class="code" href="string_8hpp.html#a3fb0a6b6623ebd4d9f20344af56c8471">_LG</a>(<span class="stringliteral">&quot;This informational message is displayed in both ANSI and Unicode builds.&quot;</span>));</div>
<div class="line"><a class="code" href="macro_8hpp.html#a8f75b971030a39ef811d3526a62b36b8">WARN</a>(<a class="code" href="string_8hpp.html#ad862335db47791493a387abb20198c2f">LOGOG_CONST_STRING</a>(<span class="stringliteral">&quot;And this one works regardless of the LOGOG_USE_PREFIX setting.&quot;</span>));</div>
</div><!-- fragment --><p>Mixing and matching both Unicode and ANSI messages in one application is not currently supported, as most compilers do not implement this functionality.</p>
<p><b>Windows specific issues</b></p>
<p>Windows platforms have special considerations when logging to the console with wide characters via wcout or wcerr. Because logog shares the console with its host application, it does not initialize the console in any way. On Windows flavored platforms, the console must be initialized in a Unicode-friendly way. See <a href="http://blogs.msdn.com/b/michkap/archive/2008/03/18/8306597.aspx">http://blogs.msdn.com/b/michkap/archive/2008/03/18/8306597.aspx</a> for details about how this might work.</p>
<p>One way of initializing a Windows console for Unicode support, which seems to work, is as follows:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef LOGOG_UNICODE</span></div>
<div class="line"><span class="preprocessor">#ifdef LOGOG_FLAVOR_WINDOWS</span></div>
<div class="line">    _setmode(_fileno(stdout), _O_U16TEXT);</div>
<div class="line">    _setmode(_fileno(stderr), _O_U16TEXT);</div>
<div class="line"><span class="preprocessor">#endif // LOGOG_FLAVOR_WINDOWS</span></div>
<div class="line"><span class="preprocessor">#endif // LOGOG_UNICODE</span></div>
</div><!-- fragment --><p> See also Microsoft's documentation at <a href="http://msdn.microsoft.com/en-us/library/tw4k6df8.aspx">http://msdn.microsoft.com/en-us/library/tw4k6df8.aspx</a> . </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jul 26 2017 00:58:03 for logog by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
